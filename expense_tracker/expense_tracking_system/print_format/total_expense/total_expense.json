{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-01-24 12:17:14.227747",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Expenses",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            margin: 20px;\r\n        }\r\n        table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            margin-top: 20px;\r\n        }\r\n        th, td {\r\n            border: 1px solid #ddd;\r\n            padding: 8px;\r\n            text-align: center;\r\n        }\r\n        th {\r\n            background-color: #E5B4D2; \r\n            color: white; \r\n        }\r\n        tr:hover {\r\n            background-color: #ddd; \r\n        }\r\n        h3 {\r\n            text-align: center; \r\n            color: #D6A7F7; \r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    \r\n{% if letter_head %}\r\n    <div class=\"letterhead\">\r\n        {{ letter_head | safe }}\r\n    </div>\r\n{% endif %}\r\n\r\n\r\n<h3>Monthly Expense Details</h3>\r\n\r\n<table>\r\n    <thead>\r\n        <tr>\r\n            <th>Index</th>\r\n            <th>Doc Name</th>\r\n            <th>Description</th>\r\n            <th>Expense Date</th>\r\n            <th>Amount</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        {%- set expenses = frappe.get_all('Expenses', fields=['name','description', 'expense_date', 'amount']) -%}\r\n        {%- for index, record in enumerate(expenses) -%}\r\n            <tr>\r\n                <td>{{ index + 1 }}</td> \r\n                <td>{{ record.name }}</td> \r\n                <td>{{ record.description }}</td>\r\n                <td>{{ record.expense_date }}</td> \r\n                <td>{{ record.amount }}</td> \r\n            </tr>\r\n        {% endfor %}\r\n    </tbody>\r\n</table>\r\n\r\n<h3>Monthly Expense Summary</h3>\r\n\r\n<table>\r\n    <thead>\r\n        <tr>\r\n            <th>Month</th>\r\n            <th>Year</th>\r\n            <th>Total Expense</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        {%- set monthly_expenses = frappe.db.sql(\"\"\"\r\n            SELECT \r\n                TO_CHAR(expense_date, 'Mon') AS month,\r\n                YEAR(expense_date) AS year,\r\n                SUM(amount) AS total_expense\r\n            FROM `tabExpenses`\r\n            GROUP BY year, month\r\n            ORDER BY year DESC, month DESC\r\n        \"\"\", as_dict=True) -%}\r\n        \r\n        {%- for record in monthly_expenses -%}\r\n            <tr>\r\n                <td>{{ record.month }}</td>\r\n                <td>{{ record.year }}</td>\r\n                <td>{{ record.total_expense }}</td>\r\n            </tr>\r\n        {% endfor %}\r\n    </tbody>\r\n</table>\r\n\r\n</body>\r\n</html>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-01-29 15:18:43.097457",
 "modified_by": "Administrator",
 "module": "Expense Tracking System",
 "name": "Total Expense",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}